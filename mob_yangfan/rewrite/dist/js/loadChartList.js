define(["optionMap"],function(e){var i=function(){n(),require.config({packages:[{name:"echarts",location:"./src",main:"echarts"},{name:"zrender",location:"./zrender/src",main:"zrender"}]}),require(["echarts","echarts/chart/line","echarts/chart/pie"],function(e){t(e)})},t=function(i){for(var t=$(".mychart"),n=[],a=0;a<t.length;a++)!function(){var r=t[a].dataset.optionkey;n[a]=i.init(t[a],{noDataLoadingOption:{text:"暂无数据",effect:"bubble",textStyle:{fontFamily:"Microsoft YaHei",fontSize:14}}}),n[a].setOption(e[r])}()},n=function(){e.mypie.series[0].data=[],e.myline.xAxis[0].data=[],e.myline.series[0].data=[],e.myline.series[1].data=[];var i=window.localStorage,t=JSON.parse(i.getItem("mybill"))||void 0;if(!t||!t.billList.length)return!1;var n=((100*t.income-100*t.spending)/100).toFixed(2);$(".all-income").html("￥"+t.income.toFixed(2)),$(".all-spending").html("￥"+t.spending.toFixed(2)),$(".all-remaining").html("￥"+n);var a=["一月","二月","三月","四月","五月","六月","七月","八月","九月","十月","十一月","十二月"],r={clothes:"衣服",diet:"饮食",accommodation:"住宿",traffic:"交通",shopping:"购物",others:"其他"},o=t.categorylist;for(var s in o){var l={value:o[s],name:r[s]};e.mypie.series[0].data.push(l)}var m=e.mypie.series[0].data.every(function(e){return 0==e.value});m&&(e.mypie.series[0].data=[]);for(var c=t.billList,d=c[0].month,h={},f={},p=[],s=0;6>s;s++)d=(d+12)%12,p.unshift(d),h[d]=0,f[d]=0,e.myline.xAxis[0].data.unshift(a[--d]);for(var s=0;s<t.billList.length;s++){var u=t.billList[s];if(!(u.month in h))break;"income"==u.category?h[u.month]+=+u.money:f[u.month]+=+u.money}for(var s=0;6>s;s++)e.myline.series[0].data.push(h[p[s]]),e.myline.series[1].data.push(f[p[s]])};return{init:i}});